<!DOCTYPE html>
<html>
	<head>
		<title>Resize.js Demo</title>
		<script src="./resize.js"></script>
		<style>
		</style>
		<script>
			var down_context2d = null;
			var down_resize = null;
			var up_context2d = null;
			var up_resize = null;
			function process_data() {
				var elementHandle = document.createElement("canvas");
				var contextHandle = elementHandle.getContext("2d");
				var source = document.getElementById("source");
				elementHandle.width = 500;
				elementHandle.height = 500;
				contextHandle.drawImage(source, 0, 0, source.width, source.height, 0, 0, source.width, source.height);
				var dataToScale = contextHandle.getImageData(0, 0, source.width, source.height).data;
				//down_context2d
				elementHandle = document.getElementById("down_context2d");
				contextHandle = elementHandle.getContext("2d");
				elementHandle.width = 150;
				elementHandle.height = 150;
				contextHandle.drawImage(source, 0, 0, source.width, source.height, 0, 0, 150, 150);
				//down_resize
				elementHandle = document.getElementById("down_resize");
				contextHandle = elementHandle.getContext("2d");
				elementHandle.width = 150;
				elementHandle.height = 150;
				var resized = new Resize(source.width, source.height, 150, 150, true, true)
				updateCanvas(contextHandle, contextHandle.createImageData(150, 150), resized.resize(dataToScale));
				//up_context2d
				var elementHandle = document.getElementById("up_context2d");
				var contextHandle = elementHandle.getContext("2d");
				elementHandle.width = 1000;
				elementHandle.height = 1000;
				contextHandle.drawImage(source, 0, 0, source.width, source.height, 0, 0, 1000, 1000);
				//up_resize
				elementHandle = document.getElementById("up_resize");
				contextHandle = elementHandle.getContext("2d");
				elementHandle.width = 1000;
				elementHandle.height = 1000;
				resized = new Resize(source.width, source.height, 1000, 1000, true, true)
				updateCanvas(contextHandle, contextHandle.createImageData(1000, 1000), resized.resize(dataToScale));
			}
			function updateCanvas(contextHandle, imageBuffer, frameBuffer) {
				var data = imageBuffer.data;
				var length = data.length;
				for (var x = 0; x < length; ++x) {
					data[x] = frameBuffer[x] & 0xFF;
				}
				contextHandle.putImageData(imageBuffer, 0, 0);
			}
		</script>
	</head>
	<body>
		<h3>Original Image:</h3>
		<img src="./flower.png" id="source" onload="process_data();">
		<br>
		<h3>Downscaling With Context2d:</h3>
		<canvas id="down_context2d"></canvas>
		<br>
		<h3>Downscaling With Resize.js:</h3>
		<canvas id="down_resize"></canvas>
		<br>
		<h3>Upscaling With Context2d:</h3>
		<canvas id="up_context2d"></canvas>
		<br>
		<h3>Upscaling With Resize.js:</h3>
		<canvas id="up_resize"></canvas>
		<br>
	</body>
</html>